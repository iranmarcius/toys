<?xml version="1.0" encoding="utf-8"?>

<project name="BuildBase" xmlns:artifact="antlib:org.apache.maven.artifact.ant" default="install">
	<property environment="env"/>
	<property name="mvn.repo" value="${env.HOMEDRIVE}${env.HOMEPATH}/.m2/repository"/>
	<path
		id="maven-ant-tasks.classpath"
		path="${mvn.repo}/org/apache/maven/maven-ant-tasks/2.1.3/maven-ant-tasks-2.1.3.jar"/>

	<typedef
		resource="org/apache/maven/artifact/ant/antlib.xml"
		uri="antlib:org.apache.maven.artifact.ant"
		classpathref="maven-ant-tasks.classpath"/>

	<target name="init">
		<artifact:pom id="pom" file="pom.xml"/>
		<property name="artifact.path" value="${env.HOMEDRIVE}${env.HOMEPATH}\.m2\repository"/>
		<echo>Reposit√≥rio local: ${artifact.path}</echo>
	</target>

	<target name="jar" depends="init">
		<delete file="target/${pom.artifactId}-${pom.version}.jar"/>
		<artifact:mvn>
			<arg value="jar:jar"/>
		</artifact:mvn>
	</target>

	<target name="install" depends="jar">
		<delete dir="${artifact.path}" includes="**/${pom.artifactId}/${pom.version}/**/*"/>
		<artifact:install file="target/${pom.artifactId}-${pom.version}.jar">
			<pom refid="pom"/>
		</artifact:install>
	</target>

	<target name="buildcp">
		<delete dir="target/dependency"/>
		<artifact:mvn><arg value="dependency:copy-dependencies"/></artifact:mvn>
		<pathconvert property="cp" pathsep=" ">
			<mapper>
				<chainedmapper>
					<flattenmapper/>
					<globmapper from="*" to="lib/*"/>
				</chainedmapper>
			</mapper>

			<path>
				<fileset dir="target/dependency/" includes="*"/>
			</path>
		</pathconvert>
	</target>

</project>